DROP TABLE IF EXISTS TEST_TABLE;
CREATE TABLE TEST_TABLE (
 	id 				INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 	description 	VARCHAR(50));

-- Secuencias
DROP SEQUENCE IF EXISTS SEQ_SHV_WF_WORKFLOW; 
CREATE SEQUENCE SEQ_SHV_WF_WORKFLOW START WITH 50 INCREMENT BY 1;

DROP SEQUENCE IF EXISTS SEQ_SHV_WF_WF_ESTADO; 
CREATE SEQUENCE SEQ_SHV_WF_WF_ESTADO START WITH 50 INCREMENT BY 1;

DROP SEQUENCE IF EXISTS SEQ_SHV_WF_WF_ESTADO_HIST; 
CREATE SEQUENCE SEQ_SHV_WF_WF_ESTADO_HIST START WITH 50 INCREMENT BY 1;

DROP SEQUENCE IF EXISTS SEQ_SHV_BOL_BOLETA;
CREATE SEQUENCE SEQ_SHV_BOL_BOLETA START WITH 50 INCREMENT BY 1;
  
DROP SEQUENCE IF EXISTS SEQ_SHV_BOL_NRO_BOL;
CREATE SEQUENCE SEQ_SHV_BOL_NRO_BOL START WITH 50 INCREMENT BY 1;

DROP SEQUENCE IF EXISTS SEQ_SHV_TAL_TALONARIO;
CREATE SEQUENCE SEQ_SHV_TAL_TALONARIO START WITH 50 INCREMENT BY 1;

DROP SEQUENCE IF EXISTS SEQ_SHV_TAL_COMPENSACION;
CREATE SEQUENCE SEQ_SHV_TAL_COMPENSACION START WITH 50 INCREMENT BY 1;

DROP SEQUENCE IF EXISTS SEQ_SHV_TAL_RECIBO_PREIMPRESO;
CREATE SEQUENCE SEQ_SHV_TAL_RECIBO_PREIMPRESO START WITH 50 INCREMENT BY 1;
  
---------------------------------------------------------------------------------------------
-- Workflow
DROP TABLE IF EXISTS SHV_WF_WORKFLOW;
CREATE TABLE SHV_WF_WORKFLOW (
 	ID_WORKFLOW 	INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 	TIPO_WORKFLOW 	VARCHAR(50) NOT NULL
);
ALTER TABLE SHV_WF_WORKFLOW ADD CONSTRAINT WORKFLOW_PK PRIMARY KEY(ID_WORKFLOW);

DROP TABLE IF EXISTS SHV_WF_WORKFLOW_ESTADO;
CREATE TABLE SHV_WF_WORKFLOW_ESTADO (
 	ID_WORKFLOW_ESTADO 		INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 	ID_WORKFLOW  			INTEGER NOT NULL,
 	ESTADO 					VARCHAR(50) NOT NULL,
 	USUARIO_MODIFICACION 	VARCHAR(9) NOT NULL,
 	FECHA_MODIFICACION		DATE NOT NULL,
 	DATOS_MODIFICADOS		VARCHAR(2000) NOT NULL
);
ALTER TABLE SHV_WF_WORKFLOW_ESTADO ADD CONSTRAINT WORKFLOW_ACTUAL_PK PRIMARY KEY(ID_WORKFLOW_ESTADO);

DROP TABLE IF EXISTS SHV_WF_WORKFLOW_ESTADO_HIST;
CREATE TABLE SHV_WF_WORKFLOW_ESTADO_HIST (
 	ID_WORKFLOW_ESTADO_HIST	INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 	ID_WORKFLOW  			INTEGER NOT NULL,
 	ESTADO 					VARCHAR(50) NOT NULL,
 	USUARIO_MODIFICACION 	VARCHAR(9) NOT NULL,
 	FECHA_MODIFICACION		DATE NOT NULL,
 	DATOS_MODIFICADOS		VARCHAR(2000) NOT NULL
);
ALTER TABLE SHV_WF_WORKFLOW_ESTADO_HIST ADD CONSTRAINT WORKFLOW_HISTORICO_PK PRIMARY KEY(ID_WORKFLOW_ESTADO_HIST);

---------------------------------------------------------------------------------------------
-- Boletas 
DROP TABLE IF EXISTS SHV_BOL_BOLETA;
CREATE TABLE SHV_BOL_BOLETA (
	ID_BOLETA                   INTEGER NOT NULL ,
    ID_WORKFLOW                 INTEGER NOT NULL ,
    NUMERO_BOLETA               INTEGER NOT NULL ,
    EMAIL                       VARCHAR (100),
    IMPRESION_ESTADO            VARCHAR (3) NOT NULL ,
    IMPRESION_USUARIO           VARCHAR (8) NOT NULL ,
    IMPRESION_FECHA             DATE ,
    EMAIL_ENVIO_ESTADO          VARCHAR (3) ,
    EMAIL_ENVIO_OBSERVACIONES   VARCHAR (500) ,
    EMAIL_ENVIO_FECHA           DATE ,
    EMAIL_ENVIO_DESTINO         VARCHAR (100) ,
    EMAIL_ENVIO_USUARIO         VARCHAR (8) ,
    ID_REGISTRO_AVC             INTEGER  
);
ALTER TABLE SHV_BOL_BOLETA ADD CONSTRAINT BOLETA_PK PRIMARY KEY ( ID_BOLETA ) ;
  
DROP TABLE IF EXISTS SHV_BOL_BOLETA_SIN_VALOR;
CREATE TABLE SHV_BOL_BOLETA_SIN_VALOR (
	ID_BOLETA             INTEGER NOT NULL ,
    ID_EMPRESA            VARCHAR (2) NOT NULL ,
    ID_SEGMENTO           VARCHAR (3) NOT NULL ,
    ID_CLIENTE_SIEBEL     NUMERIC NOT NULL ,
    ID_CLIENTE_LEGADO     NUMERIC NOT NULL ,
    RAZON_SOCIAL          VARCHAR (200),
    ID_ANALISTA           VARCHAR (9) NOT NULL ,
    ID_COPROPIETARIO      VARCHAR (9),
    IMPORTE               DECIMAL (13,2) NOT NULL ,
    ID_ORIGEN             INTEGER ,
    OBSERVACIONES         VARCHAR (250) ,
    OBSERVACIONES_MAIL    VARCHAR (250) ,
    ID_ACUERDO            INTEGER NOT NULL ,
    OPERACION_ASOCIADA    INTEGER,
    ID_MOTIVO             INTEGER
);
ALTER TABLE SHV_BOL_BOLETA_SIN_VALOR ADD CONSTRAINT BOL_BOLETA_SIN_VALOR_PK PRIMARY KEY ( ID_BOLETA ) ;

---------------------------------------------------------------------------------------------
-- Talonarios 
DROP TABLE IF EXISTS SHV_TAL_TALONARIO;
CREATE TABLE SHV_TAL_TALONARIO (
    ID_TALONARIO				INTEGER NOT NULL ,
	ID_WORKFLOW					INTEGER NOT NULL ,
	ID_EMPRESA					VARCHAR (2) NOT NULL ,
	ID_SEGMENTO					VARCHAR (3) NOT NULL ,
	RANGO_DESDE					INTEGER	NOT NULL,
	RANGO_HASTA					INTEGER	NOT NULL,
	USUARIO_GESTOR				INTEGER 
);
ALTER TABLE SHV_TAL_TALONARIO ADD CONSTRAINT TALONARIO_PK PRIMARY KEY ( ID_TALONARIO ) ;
 
---------------------------------------------------------------------------------------------
-- Compensaciones 
DROP TABLE IF EXISTS SHV_TAL_COMPENSACION;
CREATE TABLE SHV_TAL_COMPENSACION (
    ID_COMPENSACION				INTEGER NOT NULL ,
	ID_RECIBO_PREIMPRESO		INTEGER NOT NULL ,
	REFERENCIA					INTEGER ,
	IMPORTE						DECIMAL (15,2) NOT NULL 
);
ALTER TABLE SHV_TAL_COMPENSACION ADD CONSTRAINT COMPENSACION_PK PRIMARY KEY ( ID_COMPENSACION ) ;

---------------------------------------------------------------------------------------------
-- Recibos Pre Impresos 
DROP TABLE IF EXISTS SHV_TAL_RECIBO_PREIMPRESO;
CREATE TABLE SHV_TAL_RECIBO_PREIMPRESO (
    ID_RECIBO_PREIMPRESO		INTEGER NOT NULL 		,
	ID_TALONARIO				INTEGER NOT NULL 		,
	NUMERO_RECIBO				INTEGER 				,
	IMPORTE						DECIMAL (15,2) NOT NULL ,
	ESTADO	 					VARCHAR (10) NOT NULL 	,
	FECHA_ANULACION				DATE					,	
	USUARIO_ANULACION			VARCHAR (8) NOT NULL 
);
ALTER TABLE SHV_TAL_RECIBO_PREIMPRESO ADD CONSTRAINT RECIBO_PREIMPRESO_PK PRIMARY KEY ( ID_RECIBO_PREIMPRESO ) ;

---------------------------------------------------------------------------------------------
-- Tablas Parametricas
DROP TABLE IF EXISTS SHV_PARAM_EMPRESA;
CREATE TABLE SHV_PARAM_EMPRESA (
    ID_EMPRESA                     VARCHAR (2) NOT NULL ,
    DESCRIPCION                    VARCHAR (30) NOT NULL
);
ALTER TABLE SHV_PARAM_EMPRESA ADD CONSTRAINT EMPRESA_PK PRIMARY KEY ( ID_EMPRESA ) ;

DROP TABLE IF EXISTS SHV_PARAM_SEGMENTO;
CREATE TABLE SHV_PARAM_SEGMENTO (
    ID_SEGMENTO                    VARCHAR (3) NOT NULL ,
    DESCRIPCION                    VARCHAR (200) NOT NULL
);
ALTER TABLE SHV_PARAM_SEGMENTO ADD CONSTRAINT SEGMENTO_PK PRIMARY KEY ( ID_SEGMENTO) ;

DROP TABLE IF EXISTS SHV_PARAM_SEGMENTO_EMPRESA;
CREATE TABLE SHV_PARAM_SEGMENTO_EMPRESA (
  	ID_SEGMENTO_EMPRESA            INTEGER NOT NULL,
    ID_EMPRESA                     VARCHAR (2) NOT NULL,
    ID_SEGMENTO                    VARCHAR (3) NOT NULL 
);
ALTER TABLE SHV_PARAM_SEGMENTO_EMPRESA ADD CONSTRAINT SEGMENTO_EMPRESA_PK PRIMARY KEY ( ID_SEGMENTO_EMPRESA) ;

DROP TABLE IF EXISTS SHV_PARAM_TIPO_GESTION;
CREATE TABLE SHV_PARAM_TIPO_GESTION
  (
  	ID_TIPO_GESTION                INTEGER NOT NULL,
  	ID_SEGMENTO_EMPRESA            INTEGER NOT NULL,
    ID_TIPO_VALOR                  INTEGER,
    ID_ACUERDO                     INTEGER,
    ID_ORIGEN 		               INTEGER NOT NULL
  ) ;
ALTER TABLE SHV_PARAM_TIPO_GESTION ADD CONSTRAINT TIPO_GESTION_PK PRIMARY KEY ( ID_TIPO_GESTION) ;


DROP TABLE IF EXISTS SHV_PARAM_ACUERDO;
CREATE TABLE SHV_PARAM_ACUERDO (
    ID_ACUERDO      INTEGER NOT NULL ,
    ID_BANCO_CUENTA INTEGER NOT NULL ,
    DESCRIPCION     VARCHAR (50) NOT NULL ,
    SECUENCIAL      INTEGER NOT NULL ,
    ES_CONCILIABLE  CHAR (1) NOT NULL
);
ALTER TABLE SHV_PARAM_ACUERDO ADD CONSTRAINT ACUERDO_PK PRIMARY KEY ( ID_ACUERDO ) ;
  
DROP TABLE IF EXISTS SHV_PARAM_BANCO_CUENTA;
CREATE TABLE SHV_PARAM_BANCO_CUENTA (
    ID_BANCO_CUENTA              INTEGER NOT NULL ,
    ID_BANCO                     VARCHAR (4) NOT NULL ,
    CUENTA_BANCARIA              VARCHAR (30) NOT NULL
);
ALTER TABLE SHV_PARAM_BANCO_CUENTA ADD CONSTRAINT BANCO_CUENTA_PK PRIMARY KEY ( ID_BANCO_CUENTA ) ;
  
DROP TABLE IF EXISTS SHV_PARAM_BANCO;
CREATE TABLE SHV_PARAM_BANCO (
    ID_BANCO    VARCHAR (4) NOT NULL ,
    DESCRIPCION VARCHAR (50) NOT NULL ,
    CUIT        VARCHAR (20) ,
    --LOGO        LONGVARBINARY ,
    CODIGO_IIBB VARCHAR (15) NOT NULL ,
    ID_EMPRESA  VARCHAR (2)
);
ALTER TABLE SHV_PARAM_BANCO ADD CONSTRAINT BANCO_PK PRIMARY KEY ( ID_BANCO ) ;

DROP TABLE IF EXISTS SHV_PARAM_ORIGEN;
CREATE TABLE SHV_PARAM_ORIGEN
  (
    ID_ORIGEN 		INTEGER NOT NULL ,
    DESCRIPCION     VARCHAR (50) NOT NULL
  ) ;
ALTER TABLE SHV_PARAM_ORIGEN ADD CONSTRAINT SHV_PARAM_ORIGEN_PK PRIMARY KEY ( ID_ORIGEN ) ;

DROP TABLE IF EXISTS SHV_PARAM_MOTIVO;
CREATE TABLE SHV_PARAM_MOTIVO
  (
    ID_MOTIVO 		INTEGER NOT NULL ,
    DESCRIPCION     VARCHAR (50) NOT NULL
  ) ;
ALTER TABLE SHV_PARAM_MOTIVO ADD CONSTRAINT SHV_PARAM_MOTIVO_PK PRIMARY KEY ( ID_MOTIVO ) ;

DROP TABLE IF EXISTS SHV_PARAM_PARAMETRO;
CREATE TABLE SHV_PARAM_PARAMETRO (
 	CLAVE            VARCHAR(50) NOT NULL ,
	VALOR_TEXTO      VARCHAR(255),
	VALOR_NUMERICO   INTEGER
);
ALTER TABLE SHV_PARAM_PARAMETRO ADD CONSTRAINT PARAMETRO_PK PRIMARY KEY(CLAVE);
---------------------------------------------------------------------------------------------
-- Seguridad
DROP TABLE IF EXISTS SHV_SEG_PERFIL;
CREATE TABLE SHV_SEG_PERFIL (
    ID_PERFIL   		 INTEGER NOT NULL,
    NOMBRE      		 VARCHAR (50) NOT NULL,
    ID_PERFIL_APLICATIVO VARCHAR (5) NOT NULL,
    ID_EMPRESA           VARCHAR (2),
    ID_SEGMENTO  		 VARCHAR (3)
);
ALTER TABLE SHV_SEG_PERFIL ADD CONSTRAINT PERFIL_PK PRIMARY KEY (ID_PERFIL);

DROP TABLE IF EXISTS SHV_SEG_PERFIL_APLICATIVO;
CREATE TABLE SHV_SEG_PERFIL_APLICATIVO (
    ID_PERFIL_APLICATIVO 		VARCHAR (5) NOT NULL,
    DESCRIPCION          		VARCHAR (50) NOT NULL
);
ALTER TABLE SHV_SEG_PERFIL_APLICATIVO ADD CONSTRAINT PERFIL_APLICATIVO_PK PRIMARY KEY ( ID_PERFIL_APLICATIVO );

DROP TABLE IF EXISTS SHV_MNU_MENU_PERFIL;
CREATE TABLE SHV_MNU_MENU_PERFIL (
	ID_MENU_PERFIL 		 INTEGER NOT NULL,
	ID_PERFIL   		 INTEGER NOT NULL,
    ID_MENU 		 	 INTEGER NOT NULL 
);
ALTER TABLE SHV_MNU_MENU_PERFIL ADD CONSTRAINT MENU_PERFIL_PK PRIMARY KEY (ID_MENU_PERFIL);

DROP TABLE IF EXISTS SHV_MNU_MENU;
CREATE TABLE SHV_MNU_MENU (
	ID_MENU 		 	INTEGER NOT NULL,
    DESCRIPCION   		VARCHAR(50) NOT NULL,
    URL_ACCESO			VARCHAR(100) NOT NULL,
    ORDEN				INTEGER NOT NULL,
    MENU_ID_MENU		INTEGER    
);
ALTER TABLE SHV_MNU_MENU ADD CONSTRAINT MENU_PK PRIMARY KEY (ID_MENU);


DROP SEQUENCE IF EXISTS SEQ_SHV_MSJ_TRANSACCION_MENS; 
CREATE SEQUENCE SEQ_SHV_MSJ_TRANSACCION_MENS START WITH 1 INCREMENT BY 1;

DROP TABLE IF EXISTS SHV_MSJ_TRANSACCION_MENSAJERIA;
CREATE TABLE SHV_MSJ_TRANSACCION_MENSAJERIA
  (
    ID_TRANSACCION_MENSAJERIA INTEGER NOT NULL,
    ID_TRANSACCION            INTEGER NOT NULL,
    SERVICIO                  VARCHAR(50),
    SECUENCIAL                INTEGER,
    ID_FECHA 				  DATE NOT NULL,
    ESTADO             		  VARCHAR(10) NOT NULL,
    MENSAJE_ENVIADO    	 	  VARCHAR(2000) NOT NULL,
    RESPUESTA_RECIBIDA 		  VARCHAR(2000) NOT NULL,
);
ALTER TABLE SHV_MSJ_TRANSACCION_MENSAJERIA ADD CONSTRAINT TRANSACCION_MENSAJERIA_PK PRIMARY KEY (ID_TRANSACCION_MENSAJERIA);

DROP TABLE IF EXISTS SHV_COB_TRANSACCION
CREATE TABLE SHV_COB_TRANSACCION
(
    ID_TRANSACCION       INTEGER NOT NULL,
    ID_OPERACION         INTEGER NOT NULL,
    ESTADO_PROCESAMIENTO VARCHAR(50) NOT NULL,
    ID_CLIENTE           INTEGER NOT NULL,
    REFERENCIA_FACTURA   INTEGER NOT NULL,
    IMPORTE              INTEGER NOT NULL,
    FECHA_VALOR 		 DATE NOT NULL,
    COBRADOR_DESTINO 	 VARCHAR(20),
);
ALTER TABLE SHV_COB_TRANSACCION ADD CONSTRAINT TRANSACCION_PK PRIMARY KEY (ID_TRANSACCION);

